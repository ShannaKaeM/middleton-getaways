{# Colors Editor - Load tokens from JSON #}
{% set color_tokens = load_primitive('colors') %}

<div class="primitive-editor primitive-colors">
    <header class="primitive-header">
        <div class="primitive-header-content">
            <h1 class="primitive-title">Color Primitives</h1>
            <p class="primitive-description">Edit color values for the design system. Changes update the color primitive book.</p>
        </div>
        <div class="primitive-header-actions">
            <button class="btn-icon" id="reset-colors" title="Reset to defaults">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                    <path d="M3 3v5h5"/>
                </svg>
            </button>
            <button class="btn-icon" id="export-colors" title="Export colors">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
        </div>
    </header>

    <div class="primitive-content">
        {# Macro for color card to avoid repetition #}
        {% macro color_card(slug, hex) %}
            <div class="color-card" data-slug="{{ slug }}" data-value="{{ hex }}">
                <div class="color-preview" style="background-color: {{ hex }};">
                    <button class="color-picker-btn" title="Pick color">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 21a8 8 0 0 1 13.292-6.706l4.712 4.712a4 4 0 1 1-5.656 5.656l-3.878-3.878A8 8 0 0 1 2 21z"/>
                            <path d="M10 13.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="color-info">
                    <h3 class="color-name">{{ slug|replace({'-': ' '})|title }}</h3>
                    <p class="color-slug">{{ slug }}</p>
                    
                    <div class="color-controls">
                        <div class="control-group">
                            <input type="text" 
                                   class="hex-input" 
                                   value="{{ hex }}"
                                   data-slug="{{ slug }}"
                                   pattern="^#[0-9A-Fa-f]{6}$">
                        </div>
                        
                        <div class="control-group">
                            <label>Opacity</label>
                            <div class="slider-container">
                                <input type="range" 
                                       class="opacity-slider" 
                                       min="0" 
                                       max="100" 
                                       value="100"
                                       data-slug="{{ slug }}">
                                <span class="slider-value">100%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="color-adjustments">
                        <div class="adjustment-tabs">
                            <button class="tab-btn active" data-tab="hsl-{{ slug }}">HSL</button>
                            <button class="tab-btn" data-tab="cmyk-{{ slug }}">CMYK</button>
                        </div>
                        
                        <div class="tab-content" id="hsl-{{ slug }}">
                            <div class="control-group">
                                <label>Hue</label>
                                <input type="range" class="hue-slider" min="0" max="360" data-slug="{{ slug }}">
                                <span class="slider-value">0Â°</span>
                            </div>
                            <div class="control-group">
                                <label>Saturation</label>
                                <input type="range" class="saturation-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                            <div class="control-group">
                                <label>Lightness</label>
                                <input type="range" class="lightness-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="cmyk-{{ slug }}" style="display: none;">
                            <div class="control-group">
                                <label>Cyan</label>
                                <input type="range" class="cyan-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                            <div class="control-group">
                                <label>Magenta</label>
                                <input type="range" class="magenta-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                            <div class="control-group">
                                <label>Yellow</label>
                                <input type="range" class="yellow-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                            <div class="control-group">
                                <label>Black</label>
                                <input type="range" class="black-slider" min="0" max="100" data-slug="{{ slug }}">
                                <span class="slider-value">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="color-value">
                        <code>{{ hex }}</code>
                        <button class="copy-btn" data-copy="{{ hex }}">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        {% endmacro %}

        <!-- Primary Colors -->
        <section class="color-section">
            <h2 class="section-title">Primary Colors</h2>
            <div class="color-grid color-grid-3">
                {% for slug in ['primary-light', 'primary', 'primary-dark'] %}
                    {{ _self.color_card(slug, color_tokens.colors[slug]) }}
                {% endfor %}
            </div>
        </section>

        <!-- Secondary Colors -->
        <section class="color-section">
            <h2 class="section-title">Secondary Colors</h2>
            <div class="color-grid color-grid-3">
                {% for slug in ['secondary-light', 'secondary', 'secondary-dark'] %}
                    {{ _self.color_card(slug, color_tokens.colors[slug]) }}
                {% endfor %}
            </div>
        </section>

        <!-- Neutral Colors -->
        <section class="color-section">
            <h2 class="section-title">Neutral Colors</h2>
            <div class="color-grid color-grid-3">
                {% for slug in ['neutral-light', 'neutral', 'neutral-dark'] %}
                    {{ _self.color_card(slug, color_tokens.colors[slug]) }}
                {% endfor %}
            </div>
        </section>

        <!-- Base Colors -->
        <section class="color-section">
            <h2 class="section-title">Base Colors</h2>
            <div class="color-grid color-grid-3">
                {% for slug in ['base-lightest', 'base-light', 'base', 'base-dark', 'base-darkest'] %}
                    {{ _self.color_card(slug, color_tokens.colors[slug]) }}
                {% endfor %}
            </div>
        </section>

        <!-- Extreme Colors -->
        <section class="color-section">
            <h2 class="section-title">Extreme Colors</h2>
            <div class="color-grid color-grid-3 extreme-colors">
                {% for slug in ['extreme-light', 'extreme-dark'] %}
                    {{ _self.color_card(slug, color_tokens.colors[slug]) }}
                {% endfor %}
            </div>
        </section>
    </div>
    
    <div class="floating-save-indicator" id="save-indicator">
        <span class="save-status"></span>
    </div>
</div>
