{# Typography Editor - Load tokens from JSON #}
{% set typography_tokens = load_primitive('typography') %}

<div class="primitive-editor typography-editor">
    <div class="primitive-header">
        <h1>Typography Editor</h1>
        <div class="primitive-actions">
            <button id="save-to-json" class="btn btn-primary">Save</button>
            <button id="sync-to-theme-json" class="btn btn-secondary">Save to Theme</button>
            <button id="reset-typography" class="btn btn-ghost">Reset</button>
            <button id="export-typography" class="btn btn-ghost">Export</button>
        </div>
    </div>

    <div class="primitive-content">
        <!-- Font Sizes -->
        <section class="primitive-section">
            <h2>Font Sizes</h2>
            <div class="typography-grid">
                {% for slug, size in typography_tokens.font_sizes %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p style="font-size: var(--typography-font-sizes-{{ slug }});">Text</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">{{ slug|upper }}</label>
                        <div class="control-group">
                            <input type="number" 
                                   class="font-size-input" 
                                   data-slug="{{ slug }}" 
                                   value="{{ size|replace({'rem': '', 'px': '', 'em': ''}) }}"
                                   step="0.1">
                            <select class="font-size-unit" data-slug="{{ slug }}">
                                <option value="rem" {% if 'rem' in size %}selected{% endif %}>rem</option>
                                <option value="px" {% if 'px' in size %}selected{% endif %}>px</option>
                                <option value="em" {% if 'em' in size %}selected{% endif %}>em</option>
                            </select>
                        </div>
                        <span class="value-display font-size-value" data-slug="{{ slug }}">{{ size }}</span>
                        <button class="copy-btn" data-copy="{{ size }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Font Families -->
        <section class="primitive-section">
            <h2>Font Families</h2>
            <div class="typography-grid">
                {% for slug, family in typography_tokens.font_families %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p class="font-family-sample" style="font-family: var(--typography-font-families-{{ slug }}); font-weight: var(--typography-font-weights-semiBold, 600); font-size: 1.25rem;">{{ slug|replace({'_': ' ', '-': ' '})|title }}</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">Full Font Stack</label>
                        <div class="control-group">
                            <textarea class="font-stack-input" 
                                      data-slug="{{ slug }}" 
                                      rows="3">{{ family }}</textarea>
                        </div>
                        <button class="copy-btn" data-copy="{{ family }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Font Weights -->
        <section class="primitive-section">
            <h2>Font Weights</h2>
            <div class="typography-grid">
                {% for slug, weight in typography_tokens.font_weights %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p style="font-weight: {{ weight }};">Text Sample</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">{{ slug|upper }}</label>
                        <div class="control-group">
                            <input type="number" 
                                   class="weight-value" 
                                   data-slug="{{ slug }}" 
                                   value="{{ weight }}"
                                   min="100" max="900" step="100">
                        </div>
                        <span class="value-display font-weight-value" data-slug="{{ slug }}">{{ weight }}</span>
                        <button class="copy-btn" data-copy="{{ weight }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Line Heights -->
        <section class="primitive-section">
            <h2>Line Heights</h2>
            <div class="typography-grid">
                {% for slug, height in typography_tokens.line_heights %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p style="line-height: {{ height }};">This is a sample text to demonstrate line height. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">{{ slug|upper }}</label>
                        <div class="control-group">
                            <input type="number" 
                                   class="line-height-value" 
                                   data-slug="{{ slug }}" 
                                   value="{{ height }}"
                                   step="0.1" min="0.8" max="3">
                        </div>
                        <span class="value-display line-height-display" data-slug="{{ slug }}">{{ height }}</span>
                        <button class="copy-btn" data-copy="{{ height }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Letter Spacing -->
        <section class="primitive-section">
            <h2>Letter Spacing</h2>
            <div class="typography-grid">
                {% for slug, spacing in typography_tokens.letter_spacings %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p style="letter-spacing: {{ spacing }};">LETTER SPACING</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">{{ slug|upper }}</label>
                        <div class="control-group">
                            <input type="number" 
                                   class="letter-spacing-value" 
                                   data-slug="{{ slug }}" 
                                   value="{{ spacing|replace({'em': ''}) }}"
                                   step="0.01" min="-0.1" max="0.5">
                            <span class="input-suffix">em</span>
                        </div>
                        <span class="value-display letter-spacing-display" data-slug="{{ slug }}">{{ spacing }}</span>
                        <button class="copy-btn" data-copy="{{ spacing }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Text Transform -->
        <section class="primitive-section">
            <h2>Text Transform</h2>
            <div class="typography-grid">
                {% for slug, transform in typography_tokens.text_transforms %}
                <div class="typography-card">
                    <div class="typography-preview preview-{{ slug }}">
                        <p style="text-transform: {{ transform }};">Sample Text Transform</p>
                    </div>
                    <div class="typography-controls">
                        <label style="font-weight: 600;">{{ slug|upper }}</label>
                        <div class="control-group">
                            <select class="text-transform-value" data-slug="{{ slug }}">
                                <option value="none" {% if transform == 'none' %}selected{% endif %}>None</option>
                                <option value="uppercase" {% if transform == 'uppercase' %}selected{% endif %}>Uppercase</option>
                                <option value="lowercase" {% if transform == 'lowercase' %}selected{% endif %}>Lowercase</option>
                                <option value="capitalize" {% if transform == 'capitalize' %}selected{% endif %}>Capitalize</option>
                            </select>
                        </div>
                        <span class="value-display text-transform-display" data-slug="{{ slug }}">{{ transform }}</span>
                        <button class="copy-btn" data-copy="{{ transform }}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>
</div>

<script>
// Pass data to JavaScript
window.primitiveTypography = {
    ajaxUrl: '{{ function('admin_url', 'admin-ajax.php') }}',
    nonce: '{{ function('wp_create_nonce', 'mi_design_book_nonce') }}',
    canEdit: {{ function('current_user_can', 'edit_theme_options') ? 'true' : 'false' }}
};
</script>
