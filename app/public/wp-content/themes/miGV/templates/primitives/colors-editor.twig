{% extends "base.twig" %}

{% block content %}
<div class="primitive-editor primitive-colors">
    <header class="primitive-header">
        <div class="primitive-header-content">
            <h1 class="primitive-title">Color Primitives</h1>
            <p class="primitive-description">Edit and fine-tune your color design tokens. Changes sync directly to theme.json.</p>
        </div>
        <div class="primitive-header-actions">
            <button class="btn-icon" id="reset-colors" title="Reset to defaults">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                    <path d="M3 3v5h5"/>
                </svg>
            </button>
            <button class="btn-icon" id="export-colors" title="Export colors">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
        </div>
    </header>

    <div class="primitive-content">
        {% for group_key, group in color_groups %}
            <section class="color-group" data-group="{{ group_key }}">
                <h2 class="group-title">{{ group.title }}</h2>
                <div class="color-grid {% if group_key == 'base' %}color-grid--base{% elseif group_key == 'extreme' %}color-grid--extreme{% endif %}">
                    {% for color in group.colors %}
                        <div class="color-card" data-slug="{{ color.slug }}">
                            <div class="color-preview" style="background-color: {{ color.color }}">
                                <div class="color-actions">
                                    <button class="color-picker-trigger" title="Pick color">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="color-info">
                                <h3 class="color-name">{{ color.name }}</h3>
                                <p class="color-slug">{{ color.slug }}</p>
                                
                                <div class="color-controls">
                                    <div class="control-group">
                                        <label>Hex</label>
                                        <input type="text" 
                                               class="color-hex-input" 
                                               value="{{ color.color }}" 
                                               data-slug="{{ color.slug }}"
                                               placeholder="#000000">
                                    </div>
                                    
                                    <div class="control-group">
                                        <label>Opacity</label>
                                        <div class="slider-container">
                                            <input type="range" 
                                                   class="color-opacity-slider" 
                                                   min="0" 
                                                   max="100" 
                                                   value="100"
                                                   data-slug="{{ color.slug }}">
                                            <span class="slider-value">100%</span>
                                        </div>
                                    </div>
                                    
                                    <div class="color-adjustments">
                                        <button class="adjustment-toggle">Fine tune</button>
                                        <div class="adjustment-panel">
                                            <div class="control-group">
                                                <label>Hue</label>
                                                <input type="range" 
                                                       class="hue-slider" 
                                                       min="-180" 
                                                       max="180" 
                                                       value="0"
                                                       data-slug="{{ color.slug }}">
                                            </div>
                                            <div class="control-group">
                                                <label>Saturation</label>
                                                <input type="range" 
                                                       class="saturation-slider" 
                                                       min="-100" 
                                                       max="100" 
                                                       value="0"
                                                       data-slug="{{ color.slug }}">
                                            </div>
                                            <div class="control-group">
                                                <label>Lightness</label>
                                                <input type="range" 
                                                       class="lightness-slider" 
                                                       min="-100" 
                                                       max="100" 
                                                       value="0"
                                                       data-slug="{{ color.slug }}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="color-variable">
                                    <code>var(--wp--preset--color--{{ color.slug }})</code>
                                    <button class="copy-btn" data-copy="var(--wp--preset--color--{{ color.slug }})">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Hidden color picker -->
                            <input type="color" 
                                   class="color-picker-input" 
                                   value="{{ color.color }}"
                                   data-slug="{{ color.slug }}">
                        </div>
                    {% endfor %}
                </div>
            </section>
        {% endfor %}
    </div>
    
    <div class="floating-save-indicator" id="save-indicator">
        <span class="save-status"></span>
    </div>
</div>

<style>
/* Additional styles for proper grid layouts */
.color-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
}

/* Base colors: 5 items, so 3 in first row, 2 in second */
.color-grid--base {
    grid-template-columns: repeat(3, 1fr);
}

/* Extreme colors: only 2 items, but keep 3 column grid */
.color-grid--extreme {
    grid-template-columns: repeat(3, 1fr);
}

.color-grid--extreme .color-card:last-child {
    grid-column: 2;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
    .color-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .color-grid--extreme .color-card:last-child {
        grid-column: auto;
    }
}

@media (max-width: 640px) {
    .color-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
