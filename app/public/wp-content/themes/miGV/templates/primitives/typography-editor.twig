{% extends "base.twig" %}

{% block content %}
<div class="primitive-editor primitive-typography">
    <header class="primitive-header">
        <div class="primitive-header-content">
            <h1 class="primitive-title">Typography Primitives</h1>
            <p class="primitive-description">Edit font sizes and typography scales. Changes sync directly to theme.json.</p>
        </div>
        <div class="primitive-header-actions">
            <button class="btn-icon" id="reset-typography" title="Reset to defaults">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                    <path d="M3 3v5h5"/>
                </svg>
            </button>
            <button class="btn-icon" id="export-typography" title="Export typography">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
        </div>
    </header>

    <div class="primitive-content">
        <!-- Typography Scale Controls -->
        <section class="typography-section">
            <h2 class="section-title">Typography Scale</h2>
            <div class="scale-controls">
                <div class="control-group">
                    <label>Base Font Size</label>
                    <div class="input-group">
                        <input type="number" 
                               id="base-font-size" 
                               value="16" 
                               min="10" 
                               max="24"
                               step="1">
                        <span class="input-suffix">px</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>Scale Ratio</label>
                    <select id="scale-ratio">
                        <option value="1.067">Minor Second (1.067)</option>
                        <option value="1.125">Major Second (1.125)</option>
                        <option value="1.200">Minor Third (1.200)</option>
                        <option value="1.250" selected>Major Third (1.250)</option>
                        <option value="1.333">Perfect Fourth (1.333)</option>
                        <option value="1.414">Augmented Fourth (1.414)</option>
                        <option value="1.500">Perfect Fifth (1.500)</option>
                        <option value="1.618">Golden Ratio (1.618)</option>
                    </select>
                </div>
                
                <button class="btn-primary" id="apply-scale">Apply Scale</button>
            </div>
        </section>

        <!-- Font Sizes -->
        <section class="typography-section">
            <h2 class="section-title">Font Sizes</h2>
            <div class="font-sizes-grid">
                {% for size in font_sizes %}
                    <div class="font-size-card" data-slug="{{ size.slug }}">
                        <div class="size-preview">
                            <p style="font-size: {{ size.size }}; line-height: 1.5;">
                                The quick brown fox jumps over the lazy dog
                            </p>
                        </div>
                        
                        <div class="size-info">
                            <h3 class="size-name">{{ size.name|default(size.slug|capitalize) }}</h3>
                            <p class="size-slug">{{ size.slug }}</p>
                            
                            <div class="size-controls">
                                <div class="control-group">
                                    <label>Size</label>
                                    <div class="input-group">
                                        <input type="text" 
                                               class="size-input" 
                                               value="{{ size.size }}" 
                                               data-slug="{{ size.slug }}"
                                               placeholder="1rem">
                                        <div class="unit-selector">
                                            <select class="size-unit" data-slug="{{ size.slug }}">
                                                <option value="rem">rem</option>
                                                <option value="px">px</option>
                                                <option value="em">em</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="control-group">
                                    <label>Preview Scale</label>
                                    <div class="slider-container">
                                        <input type="range" 
                                               class="preview-scale-slider" 
                                               min="50" 
                                               max="200" 
                                               value="100"
                                               data-slug="{{ size.slug }}">
                                        <span class="slider-value">100%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="size-variable">
                                <code>var(--wp--preset--font-size--{{ size.slug }})</code>
                                <button class="copy-btn" data-copy="var(--wp--preset--font-size--{{ size.slug }})">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>

        <!-- Font Families -->
        <section class="typography-section">
            <h2 class="section-title">Font Families</h2>
            <div class="font-families-grid">
                {% for family in font_families %}
                    <div class="font-family-card" data-slug="{{ family.slug }}">
                        <div class="family-preview">
                            <p style="font-family: {{ family.fontFamily }}; font-size: 1.5rem;">
                                {{ family.name|default(family.slug|capitalize) }}
                            </p>
                            <p style="font-family: {{ family.fontFamily }}; font-size: 1rem; color: #6b7280;">
                                ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789
                            </p>
                        </div>
                        
                        <div class="family-info">
                            <div class="control-group">
                                <label>Font Stack</label>
                                <textarea class="font-stack-input" 
                                          data-slug="{{ family.slug }}"
                                          rows="3">{{ family.fontFamily }}</textarea>
                            </div>
                            
                            <div class="family-variable">
                                <code>var(--wp--preset--font-family--{{ family.slug }})</code>
                                <button class="copy-btn" data-copy="var(--wp--preset--font-family--{{ family.slug }})">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
    </div>
    
    <div class="floating-save-indicator" id="save-indicator">
        <span class="save-status"></span>
    </div>
</div>

<style>
/* Typography-specific styles */
.typography-section {
    margin-bottom: 3rem;
}

.section-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0 0 1.5rem 0;
    color: #1a1a1a;
}

.scale-controls {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    display: flex;
    gap: 2rem;
    align-items: flex-end;
}

.input-group {
    display: flex;
    align-items: center;
    position: relative;
}

.input-group input {
    padding-right: 3rem;
}

.input-suffix {
    position: absolute;
    right: 1rem;
    color: #6b7280;
    font-size: 0.875rem;
}

.unit-selector {
    position: absolute;
    right: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
}

.unit-selector select {
    padding: 0.25rem 0.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-size: 0.75rem;
    background: white;
}

.btn-primary {
    padding: 0.75rem 1.5rem;
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-primary:hover {
    background: #2563eb;
}

.font-sizes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
}

.font-size-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.size-preview {
    padding: 1rem;
    background: #f9fafb;
    border-radius: 8px;
    margin-bottom: 1rem;
    min-height: 80px;
    display: flex;
    align-items: center;
}

.size-preview p {
    margin: 0;
    color: #1a1a1a;
}

.font-families-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: 1.5rem;
}

.font-family-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.family-preview {
    padding: 1.5rem;
    background: #f9fafb;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.family-preview p {
    margin: 0 0 0.5rem 0;
}

.font-stack-input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-family: monospace;
    font-size: 0.875rem;
    resize: vertical;
}

.size-variable,
.family-variable {
    margin-top: 1rem;
    padding: 0.75rem;
    background: #f3f4f6;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}
</style>
{% endblock %}
